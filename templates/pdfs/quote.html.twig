<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Devis {{ quote.reference }} - Shanbo</title>
    <style>
        /* Reset & Base */
        * {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'DejaVu Sans', sans-serif;
            font-size: 11px;
            line-height: 1.6;
            color: #1a1a1a;
        }

        /* Page wrapper */
        .page {
            width: 100%;
            height: 287mm;
            position: relative;
            padding: 0;
            page-break-after: always;
        }

        .page:last-child {
            page-break-after: auto;
        }

        .page-number {
            position: absolute;
            bottom: 8mm;
            right: 15mm;
            font-size: 9px;
            color: #999;
        }

        /* ===================== PAGE 1 - COVER ===================== */
        .cover {
            background-color: #f8f8f8;
            text-align: center;
            padding-top: 80mm;
        }

        .cover-bar {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3mm;
            background-color: #1a1a1a;
        }

        .cover-title {
            font-size: 42px;
            font-weight: normal;
            color: #1a1a1a;
            margin-bottom: 5mm;
        }

        .cover-subtitle {
            font-size: 12px;
            color: #666;
            letter-spacing: 4px;
            text-transform: uppercase;
            margin-bottom: 25mm;
        }

        .cover-quote {
            font-size: 15px;
            font-style: italic;
            color: #333;
            margin: 0 auto 4mm;
            max-width: 140mm;
            line-height: 1.8;
        }

        .cover-author {
            font-size: 10px;
            color: #999;
            letter-spacing: 1px;
        }

        .cover-brand {
            margin-top: 35mm;
        }

        .cover-brand-name {
            font-size: 28px;
            font-weight: normal;
            color: #1a1a1a;
            margin-bottom: 3mm;
        }

        .cover-brand-sub {
            font-size: 10px;
            color: #888;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        /* ===================== PAGE 2 - CITATION ===================== */
        .quote-page {
            background-color: #fafafa;
            text-align: center;
            padding-top: 110mm;
        }

        .quote-large {
            font-size: 24px;
            font-weight: normal;
            color: #1a1a1a;
            line-height: 1.7;
            max-width: 150mm;
            margin: 0 auto 8mm;
        }

        .quote-author-large {
            font-size: 11px;
            color: #999;
            letter-spacing: 2px;
        }

        /* ===================== CONTENT PAGES ===================== */
        .content-page {
            padding: 15mm 18mm;
        }

        .section-title {
            font-size: 22px;
            font-weight: normal;
            color: #1a1a1a;
            margin-bottom: 5mm;
        }

        .section-subtitle {
            font-size: 11px;
            color: #666;
            line-height: 1.8;
            margin-bottom: 12mm;
        }

        /* Info boxes */
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10mm;
        }

        .info-table td {
            width: 50%;
            vertical-align: top;
            padding-right: 10mm;
        }

        .info-box {
            border-left: 2px solid #1a1a1a;
            padding-left: 5mm;
        }

        .info-label {
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: #999;
            margin-bottom: 4mm;
            font-weight: bold;
        }

        .info-item {
            font-size: 11px;
            color: #333;
            margin-bottom: 2mm;
            line-height: 1.5;
        }

        .info-item strong {
            color: #1a1a1a;
        }

        /* Quote meta */
        .quote-meta {
            background-color: #f5f5f5;
            border-left: 2px solid #1a1a1a;
            padding: 4mm 5mm;
            margin-top: 8mm;
        }

        .quote-meta-table {
            width: 100%;
        }

        .quote-meta-table td {
            font-size: 10px;
            color: #666;
        }

        .quote-meta-table strong {
            color: #1a1a1a;
        }

        /* ===================== COLLECTION CARDS ===================== */
        .collection-card {
            border: 1px solid #e0e0e0;
            padding: 8mm;
            margin-bottom: 8mm;
            background-color: #fff;
        }

        .collection-badge {
            background-color: #1a1a1a;
            color: white;
            padding: 2mm 5mm;
            font-size: 9px;
            letter-spacing: 2px;
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 5mm;
        }

        .collection-header {
            border-bottom: 1px solid #e5e5e5;
            padding-bottom: 5mm;
            margin-bottom: 5mm;
        }

        .collection-header-table {
            width: 100%;
        }

        .collection-name {
            font-size: 18px;
            font-weight: normal;
            color: #1a1a1a;
        }

        .collection-price {
            font-size: 32px;
            font-weight: normal;
            color: #1a1a1a;
            text-align: right;
        }

        .collection-price-currency {
            font-size: 14px;
            color: #666;
        }

        /* Features */
        .feature-table {
            width: 100%;
            border-collapse: collapse;
        }

        .feature-row td {
            padding: 3mm 0;
            vertical-align: top;
            border-bottom: 1px solid #f0f0f0;
        }

        .feature-row:last-child td {
            border-bottom: none;
        }

        .feature-icon {
            width: 10mm;
            text-align: center;
            font-size: 14px;
        }

        .feature-title {
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #1a1a1a;
            margin-bottom: 1mm;
        }

        .feature-desc {
            font-size: 10px;
            color: #666;
            line-height: 1.5;
        }

        /* ===================== OPTIONS GRID ===================== */
        .options-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 8mm;
        }

        .options-table td {
            width: 50%;
            padding: 3mm;
            vertical-align: top;
        }

        .option-card {
            border: 1px solid #e5e5e5;
            padding: 5mm;
            background-color: #fafafa;
        }

        .option-name {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
            color: #1a1a1a;
            margin-bottom: 2mm;
        }

        .option-desc {
            font-size: 9px;
            color: #666;
            margin-bottom: 3mm;
        }

        .option-price {
            font-size: 18px;
            font-weight: normal;
            color: #1a1a1a;
        }

        /* ===================== CONDITIONS ===================== */
        .conditions-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 8mm;
        }

        .conditions-table td {
            width: 50%;
            vertical-align: top;
            padding: 0 5mm 5mm 0;
        }

        .condition-title {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
            color: #1a1a1a;
            margin-bottom: 3mm;
        }

        .condition-item {
            font-size: 10px;
            color: #666;
            margin-bottom: 2mm;
            padding-left: 4mm;
            line-height: 1.4;
        }

        .legal-notice {
            font-size: 9px;
            color: #999;
            font-style: italic;
            margin-top: 5mm;
            padding-top: 4mm;
            border-top: 1px solid #e5e5e5;
        }

        /* ===================== SIGNATURE SECTION ===================== */
        .signature-section {
            border: 2px solid #1a1a1a;
            padding: 8mm;
            margin-top: 8mm;
            background-color: #fafafa;
        }

        .signature-title {
            text-align: center;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 6mm;
        }

        /* Choice section */
        .choice-section {
            background-color: white;
            border: 1px solid #e5e5e5;
            padding: 5mm;
            margin-bottom: 5mm;
        }

        .choice-label {
            font-size: 9px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #666;
            margin-bottom: 3mm;
        }

        .choice-table {
            width: 100%;
            margin-bottom: 4mm;
        }

        .choice-table td {
            font-size: 10px;
            padding: 2mm 0;
        }

        .checkbox {
            width: 4mm;
            height: 4mm;
            border: 1px solid #1a1a1a;
            display: inline-block;
            margin-right: 2mm;
        }

        .checkbox-checked {
            background-color: #1a1a1a;
        }

        /* Total box */
        .total-box {
            background-color: #1a1a1a;
            color: white;
            padding: 6mm;
            margin-bottom: 5mm;
        }

        .total-table {
            width: 100%;
        }

        .total-table td {
            padding: 2mm 0;
            font-size: 11px;
        }

        .total-label {
            color: #aaa;
        }

        .total-value {
            text-align: right;
            color: white;
        }

        .total-main td {
            padding-top: 4mm;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 18px;
        }

        /* Deposit info */
        .deposit-box {
            background-color: white;
            border: 1px solid #e5e5e5;
            padding: 4mm;
            margin-bottom: 5mm;
            text-align: center;
        }

        .deposit-box p {
            font-size: 10px;
            color: #666;
            margin-bottom: 2mm;
        }

        .deposit-box strong {
            color: #1a1a1a;
        }

        /* Signature grid */
        .signature-table {
            width: 100%;
        }

        .signature-table td {
            width: 50%;
            padding: 3mm;
            vertical-align: top;
        }

        .signature-box {
            text-align: center;
            border: 1px dashed #ccc;
            padding: 5mm;
            background-color: white;
        }

        .signature-box-title {
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: bold;
            margin-bottom: 3mm;
        }

        .signature-date {
            font-size: 9px;
            color: #666;
            margin-bottom: 2mm;
        }

        .signature-hint {
            font-size: 8px;
            color: #999;
            font-style: italic;
        }

        .signature-line {
            height: 15mm;
            border-bottom: 1px solid #ccc;
            margin: 4mm 0 2mm;
        }

        .signature-label {
            font-size: 9px;
            color: #888;
        }

        /* ===================== FOOTER ===================== */
        .footer {
            background-color: #1a1a1a;
            color: #888;
            padding: 6mm 15mm;
            text-align: center;
            font-size: 9px;
            line-height: 1.8;
        }

        .footer strong {
            color: white;
        }
    </style>
</head>
<body>

<!-- ===================== PAGE 1 - COVER ===================== -->
<div class="page cover">
    <div class="cover-bar"></div>
    <div class="cover-title">Devis Photographie</div>
    <div class="cover-subtitle">{{ quote.eventType|default('Mariage') }}</div>

    <div class="cover-quote">
        "Le mariage, c'est la volonte a deux de creer l'unique."
    </div>
    <div class="cover-author">Friedrich Nietzsche</div>

    <div class="cover-brand">
        <div class="cover-brand-name">Shanbo</div>
        <div class="cover-brand-sub">Chanbora Chhun - Photographe</div>
    </div>

    <div class="page-number">1 / 6</div>
</div>

<!-- ===================== PAGE 2 - CITATION ===================== -->
<div class="page quote-page">
    <div class="quote-large">
        "Le bonheur le plus doux est celui qu'on partage."
    </div>
    <div class="quote-author-large">Jacques Delille</div>

    <div class="page-number">2 / 6</div>
</div>

<!-- ===================== PAGE 3 - INFO CLIENT ===================== -->
<div class="page content-page">
    <div class="section-title">Votre experience</div>
    <div class="section-subtitle">
        Le mariage est un moment fort et unique, une etape sublime dans votre vie.
        Je capture des moments uniques pour immortaliser la beaute et l'emotion dans chaque cliche.
        Mon art est un subtil melange entre le portrait, l'emotion et le reportage photo.
    </div>

    <table class="info-table">
        <tr>
            <td>
                <div class="info-box">
                    <div class="info-label">Photographe</div>
                    <div class="info-item"><strong>Chanbora Chhun</strong></div>
                    <div class="info-item">Auto-entrepreneur photographe</div>
                    <div class="info-item">SIRET : {{ config.siret }}</div>
                    <div class="info-item">{{ config.address }}</div>
                    <div class="info-item">{{ config.phone }}</div>
                    <div class="info-item">{{ config.email }}</div>
                </div>
            </td>
            <td>
                <div class="info-box">
                    <div class="info-label">Client</div>
                    <div class="info-item"><strong>{{ quote.clientFirstName }} {{ quote.clientLastName }}</strong></div>
                    {% if quote.clientAddress %}
                    <div class="info-item">{{ quote.clientAddress }}</div>
                    {% endif %}
                    {% if quote.clientPhone %}
                    <div class="info-item">Tel : {{ quote.clientPhone }}</div>
                    {% endif %}
                    <div class="info-item">{{ quote.clientEmail }}</div>
                    {% if quote.eventDate %}
                    <div class="info-item" style="margin-top: 4mm;"><strong>Date evenement :</strong> {{ quote.eventDate|date('d/m/Y') }}</div>
                    {% endif %}
                    {% if quote.eventLocation %}
                    <div class="info-item"><strong>Lieu :</strong> {{ quote.eventLocation }}</div>
                    {% endif %}
                </div>
            </td>
        </tr>
    </table>

    <div class="quote-meta">
        <table class="quote-meta-table">
            <tr>
                <td><strong>N° Devis :</strong> {{ quote.reference }}</td>
                <td style="text-align: center;"><strong>Date :</strong> {{ quote.createdAt|date('d/m/Y') }}</td>
                <td style="text-align: right;"><strong>Validite :</strong> {% if quote.validUntil %}jusqu'au {{ quote.validUntil|date('d/m/Y') }}{% else %}30 jours{% endif %}</td>
            </tr>
        </table>
    </div>

    <div class="page-number">3 / 6</div>
</div>

<!-- ===================== PAGE 4 - COLLECTIONS 1 & 2 ===================== -->
<div class="page content-page">
    <div class="section-title">Les Collections</div>

    <!-- Collection 1 -->
    <div class="collection-card">
        <div class="collection-badge">Collection N°1</div>
        <div class="collection-header">
            <table class="collection-header-table">
                <tr>
                    <td><span class="collection-name">Demi-Journee</span></td>
                    <td style="text-align: right;"><span class="collection-price">800</span><span class="collection-price-currency">EUR</span></td>
                </tr>
            </table>
        </div>
        <table class="feature-table">
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Reportage Photo</div>
                    <div class="feature-desc">4 heures de couverture (ceremonie + cocktail ou cocktail + soiree)</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Retouches Photos</div>
                    <div class="feature-desc">250 a 300 images haute resolution retouchees professionnellement</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Galerie En Ligne Privee</div>
                    <div class="feature-desc">Telechargement gratuit et illimite de vos photos HD</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Livraison &amp; Deplacement</div>
                    <div class="feature-desc">Sous 4 semaines max - Materiel pro redondant - Deplacement inclus (13)</div>
                </td>
            </tr>
        </table>
    </div>

    <!-- Collection 2 -->
    <div class="collection-card">
        <div class="collection-badge">Collection N°2</div>
        <div class="collection-header">
            <table class="collection-header-table">
                <tr>
                    <td><span class="collection-name">Journee Complete</span></td>
                    <td style="text-align: right;"><span class="collection-price">1 400</span><span class="collection-price-currency">EUR</span></td>
                </tr>
            </table>
        </div>
        <table class="feature-table">
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Reportage Photo</div>
                    <div class="feature-desc">8 heures de couverture (preparatifs, ceremonie, cocktail, debut soiree)</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Retouches Photos</div>
                    <div class="feature-desc">450 a 500 images HD retouchees + Seance couple dediee 20-30 min</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Galerie &amp; Livraison</div>
                    <div class="feature-desc">Galerie privee + Livraison 4 semaines max + Deplacement inclus (13)</div>
                </td>
            </tr>
        </table>
    </div>

    <div class="page-number">4 / 6</div>
</div>

<!-- ===================== PAGE 5 - COLLECTION 3 + OPTIONS ===================== -->
<div class="page content-page">
    <!-- Collection 3 -->
    <div class="collection-card">
        <div class="collection-badge">Collection N°3</div>
        <div class="collection-header">
            <table class="collection-header-table">
                <tr>
                    <td><span class="collection-name">Formule Premium</span></td>
                    <td style="text-align: right;"><span class="collection-price">1 800</span><span class="collection-price-currency">EUR</span></td>
                </tr>
            </table>
        </div>
        <table class="feature-table">
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Reportage Photo Complet</div>
                    <div class="feature-desc">12 heures (preparatifs matinaux jusqu'a ouverture de bal)</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Retouches Photos</div>
                    <div class="feature-desc">600 a 650 images HD retouchees + Seance couple 30-45 min</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Photos De Groupe</div>
                    <div class="feature-desc">Organisation et realisation (famille et amis)</div>
                </td>
            </tr>
            <tr class="feature-row">
                <td class="feature-icon">*</td>
                <td>
                    <div class="feature-title">Galerie &amp; Livraison</div>
                    <div class="feature-desc">Galerie privee + Livraison 4 semaines max + Deplacement inclus (13)</div>
                </td>
            </tr>
        </table>
    </div>

    <div class="section-title" style="margin-top: 10mm;">Options a la carte</div>
    <div class="section-subtitle">Pour une experience sur-mesure, personnalisez votre prestation.</div>

    <table class="options-table">
        <tr>
            <td>
                <div class="option-card">
                    <div class="option-name">Album Premium</div>
                    <div class="option-desc">30x30 cm - 30 pages</div>
                    <div class="option-price">450 EUR</div>
                </div>
            </td>
            <td>
                <div class="option-card">
                    <div class="option-name">Tirages Encadres</div>
                    <div class="option-desc">10x15 cm</div>
                    <div class="option-price">3 EUR/photo</div>
                </div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="option-card">
                    <div class="option-name">Heure Supplementaire</div>
                    <div class="option-desc">Prolongez votre couverture</div>
                    <div class="option-price">150 EUR</div>
                </div>
            </td>
            <td>
                <div class="option-card">
                    <div class="option-name">Deplacement</div>
                    <div class="option-desc">Hors Bouches-du-Rhone</div>
                    <div class="option-price">0,50 EUR/km</div>
                </div>
            </td>
        </tr>
    </table>

    <div class="page-number">5 / 6</div>
</div>

<!-- ===================== PAGE 6 - CONDITIONS & SIGNATURE ===================== -->
<div class="page content-page">
    <div class="section-title">Conditions generales</div>

    <table class="conditions-table">
        <tr>
            <td>
                <div class="condition-title">Modalites de paiement</div>
                <div class="condition-item">- Acompte de {{ quote.depositPercentage|default(30) }}% a la signature</div>
                <div class="condition-item">- Solde de {{ 100 - quote.depositPercentage|default(30) }}% a regler 7 jours avant</div>
                <div class="condition-item">- Virement bancaire, cheque ou especes</div>
            </td>
            <td>
                <div class="condition-title">Politique d'annulation</div>
                <div class="condition-item">- Plus de 3 mois : remboursement 100%</div>
                <div class="condition-item">- Entre 1 et 3 mois : remboursement 50%</div>
                <div class="condition-item">- Moins d'1 mois : acompte non remboursable</div>
            </td>
        </tr>
        <tr>
            <td>
                <div class="condition-title">Droits d'utilisation</div>
                <div class="condition-item">- Photos pour usage personnel uniquement</div>
                <div class="condition-item">- Le photographe conserve les droits d'auteur</div>
                <div class="condition-item">- Utilisation portfolio par le photographe</div>
            </td>
            <td>
                <div class="condition-title">Garanties</div>
                <div class="condition-item">- Materiel professionnel en double securite</div>
                <div class="condition-item">- RC professionnelle souscrite</div>
                <div class="condition-item">- Sauvegarde multiple des fichiers</div>
            </td>
        </tr>
    </table>

    <div class="legal-notice">
        TVA non applicable, article 293 B du CGI (regime auto-entrepreneur) - Assurance RC professionnelle souscrite
    </div>

    <div class="signature-section">
        <div class="signature-title">Acceptation du devis</div>

        <div class="choice-section">
            <div class="choice-label">Formule choisie :</div>
            <table class="choice-table">
                <tr>
                    <td><span class="checkbox{% if quote.packageName == 'Demi-Journée' %} checkbox-checked{% endif %}"></span> Collection N°1 (800 EUR)</td>
                    <td><span class="checkbox{% if quote.packageName == 'Journée Complète' %} checkbox-checked{% endif %}"></span> Collection N°2 (1 400 EUR)</td>
                    <td><span class="checkbox{% if quote.packageName == 'Formule Premium' %} checkbox-checked{% endif %}"></span> Collection N°3 (1 800 EUR)</td>
                </tr>
            </table>
            <div style="font-size: 10px; color: #666;">Options : {{ quote.notes|default('_________________________________') }}</div>
        </div>

        <div class="total-box">
            <table class="total-table">
                <tr>
                    <td class="total-label">Montant formule</td>
                    <td class="total-value">{{ quote.totalAmount|number_format(2, ',', ' ') }} EUR</td>
                </tr>
                {% if quote.depositAmount %}
                <tr>
                    <td class="total-label">Acompte ({{ quote.depositPercentage }}%)</td>
                    <td class="total-value">{{ quote.depositAmount|number_format(2, ',', ' ') }} EUR</td>
                </tr>
                <tr>
                    <td class="total-label">Solde restant</td>
                    <td class="total-value">{{ (quote.totalAmount - quote.depositAmount)|number_format(2, ',', ' ') }} EUR</td>
                </tr>
                {% endif %}
                <tr class="total-main">
                    <td class="total-label">Total</td>
                    <td class="total-value">{{ quote.totalAmount|number_format(2, ',', ' ') }} EUR</td>
                </tr>
            </table>
        </div>

        <table class="signature-table">
            <tr>
                <td>
                    <div class="signature-box">
                        <div class="signature-box-title">Le Photographe</div>
                        <div class="signature-date">Date : _______________</div>
                        <div class="signature-line"></div>
                        <div class="signature-label">Signature</div>
                    </div>
                </td>
                <td>
                    <div class="signature-box">
                        <div class="signature-box-title">Le Client</div>
                        <div class="signature-date">Date : _______________</div>
                        <div class="signature-hint">Precede de "Bon pour accord"</div>
                        <div class="signature-line"></div>
                        <div class="signature-label">Signature</div>
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <div class="page-number">6 / 6</div>
</div>

<!-- ===================== FOOTER ===================== -->
<div class="footer">
    <strong>Shanbo - Chanbora Chhun</strong><br>
    Photographe - Auto-entrepreneur - SIRET : {{ config.siret }}<br>
    {{ config.address }} - Tel : {{ config.phone }} - Email : {{ config.email }}
</div>

</body>
</html>
